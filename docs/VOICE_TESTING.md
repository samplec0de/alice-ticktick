# Голосовое тестирование навыка «ТикТик»

Документ для ручного тестирования всех голосовых сценариев навыка Алисы для TickTick.
Цель: выявить проблемы распознавания речи, сопоставления интентов, извлечения слотов и неудобные формулировки.

---

## 1. Инструкция по тестированию

### 1.1. Как запустить навык

**Голосом (на колонке или в приложении):**
```
«Алиса, запусти навык ТикТик»
```

**В текстовой консоли (черновик):**
1. Открыть [консоль тестирования](https://dialogs.yandex.ru/developer/skills/d3f073db-dece-42b8-9447-87511df30c83/draft/test)
2. Ввести команду в поле ввода
3. Проверить JSON-ответ и выделенные интенты/слоты

### 1.2. Что проверять для каждой команды

| Что проверить | Как проверить |
|---|---|
| Интент распознан верно | В JSON-ответе поле `nlu.intents` содержит ожидаемый intent ID |
| Слоты извлечены корректно | Значения `slots` совпадают с тем, что было сказано |
| Ответ навыка адекватен | Текст ответа соответствует ожидаемому шаблону |
| Нет перехвата другим интентом | Сработал именно нужный интент, а не более общий (например, `create_task` вместо `add_subtask`) |
| TTS звучит естественно | На колонке ответ звучит понятно и без артефактов |

### 1.3. Как фиксировать результаты

Для каждого сценария:
- `[x]` — работает корректно
- `[!]` — работает с замечаниями (указать какими)
- `[X]` — не работает (указать причину)

---

## 2. Тестовые сценарии по интентам

### 2.1. Приветствие (новая сессия)

**Триггер:** начало новой сессии (первое сообщение после запуска навыка)

**Ожидаемый ответ:**
> Привет! Я помогу управлять задачами в TickTick. Скажите "что на сегодня", "создай задачу" или "помощь".

| # | Фраза | Ожидание | Статус |
|---|---|---|---|
| 1 | _(запуск навыка)_ | Приветствие | [ ] |
| 2 | _(повторный запуск навыка)_ | Приветствие | [ ] |

**Возможные проблемы:** нет (триггерится автоматически при новой сессии).

---

### 2.2. create_task — Создание задачи

**Intent ID:** `create_task`
**Слоты:** `task_name` (STRING), `date` (DATETIME), `priority` (STRING)

**Ожидаемые ответы:**
- Без даты: `Готово! Задача "..." создана.`
- С датой: `Готово! Задача "..." создана на ...`
- Без названия: `Как назвать задачу? Скажите название.`

| # | Фраза | Слоты | Ожидание | Статус |
|---|---|---|---|---|
| 1 | «создай задачу купить хлеб» | name=купить хлеб | Задача создана | [ ] |
| 2 | «добавь задачу позвонить маме на завтра» | name=позвонить маме, date=завтра | Создана на завтра | [ ] |
| 3 | «запиши задачу подготовить отчёт на пятницу» | name=подготовить отчёт, date=пятница | Создана на пятницу | [ ] |
| 4 | «создай задачу оплатить счёт с высоким приоритетом» | name=оплатить счёт, priority=высокий | Задача создана | [ ] |
| 5 | «новая задача написать письмо» | name=написать письмо | Задача создана | [ ] |
| 6 | «поставь задачу купить молоко на послезавтра» | name=купить молоко, date=послезавтра | Создана на послезавтра | [ ] |
| 7 | «создай задачу» | name=пусто | Переспрос названия | [ ] |

**Возможные проблемы голосового распознавания:**
- «отчёт» может распознаться как «отчет» (без ё) — на fuzzy search не влияет, но может повлиять на слот
- «послезавтра» иногда распознаётся как «после завтра» (два слова) — YANDEX.DATETIME может не извлечь
- Если задача содержит слово «на» (например, «задачу на обед»), дата может неверно извлечься из «на обед»
- Слово «приоритетом» может распознаться как «приоритет том» — грамматика может не сработать

---

### 2.3. list_tasks — Просмотр задач

**Intent ID:** `list_tasks`
**Слоты:** `date` (DATETIME)

**Ожидаемые ответы:**
- Есть задачи: `На [дата] [N] задач(а/и): ...`
- Нет задач (сегодня): `На сегодня задач нет. Можно отдыхать!`
- Нет задач (другая дата): `На [дата] задач нет.`

| # | Фраза | Слоты | Ожидание | Статус |
|---|---|---|---|---|
| 1 | «что на сегодня» | date=сегодня | Список задач на сегодня | [ ] |
| 2 | «покажи задачи на завтра» | date=завтра | Список на завтра | [ ] |
| 3 | «какие задачи на понедельник» | date=понедельник | Список на понедельник | [ ] |
| 4 | «что запланировано на пятницу» | date=пятница | Список на пятницу | [ ] |
| 5 | «список задач на эту неделю» | date=эта неделя | Список на неделю | [ ] |
| 6 | «расскажи мои дела на сегодня» | date=сегодня | Список на сегодня | [ ] |
| 7 | «покажи все задачи» | date=пусто (сегодня) | Список на сегодня | [ ] |

**Возможные проблемы голосового распознавания:**
- «на понедельник» — может распознаться без привязки к конкретной дате
- «эту неделю» — YANDEX.DATETIME может не поддержать диапазон
- Фраза «что у меня на сегодня» может не сработать, если «у меня» не входит в грамматику (проверить: в грамматике нет «у меня»)

---

### 2.4. overdue_tasks — Просроченные задачи

**Intent ID:** `overdue_tasks`
**Слоты:** нет

**Ожидаемые ответы:**
- Есть просроченные: `Просроченных задач: [N]: ...`
- Нет просроченных: `Просроченных задач нет. Отличная работа!`

| # | Фраза | Ожидание | Статус |
|---|---|---|---|
| 1 | «какие задачи просрочены» | Список просроченных | [ ] |
| 2 | «покажи просроченные задачи» | Список просроченных | [ ] |
| 3 | «есть просроченные дела» | Список просроченных | [ ] |
| 4 | «что я пропустил» | Список просроченных | [ ] |
| 5 | «что я просрочил» | Список просроченных | [ ] |

**Возможные проблемы голосового распознавания:**
- «просрочены» может распознаться как «про сроки» или «просрочена» (единственное число)
- «пропустил» может не сработать, если Алиса услышит «пропустить»

---

### 2.5. complete_task — Завершение задачи

**Intent ID:** `complete_task`
**Слоты:** `task_name` (STRING)

**Ожидаемые ответы:**
- Успех: `Задача "..." отмечена выполненной.`
- Не найдена: `Задача "..." не найдена. Попробуйте сказать точнее.`

| # | Фраза | Слоты | Ожидание | Статус |
|---|---|---|---|---|
| 1 | «отметь задачу купить хлеб» | name=купить хлеб | Задача выполнена | [ ] |
| 2 | «завершить задачу написать отчёт» | name=написать отчёт | Задача выполнена | [ ] |
| 3 | «готово позвонить маме» | name=позвонить маме | Задача выполнена | [ ] |
| 4 | «сделал отправить письмо» | name=отправить письмо | Задача выполнена | [ ] |
| 5 | «закрой задачу оплатить счёт» | name=оплатить счёт | Задача выполнена | [ ] |

**Возможные проблемы голосового распознавания:**
- «отметь» может распознаться как «отмети» или «от мечь»
- Без слова «задачу» (например, «готово купить хлеб») — проверить, срабатывает ли грамматика
- Может конфликтовать с `check_item`, если название пункта чеклиста совпадает с фразой (см. известные баги)

---

### 2.6. search_task — Поиск задачи

**Intent ID:** `search_task`
**Слоты:** `query` (STRING)

**Ожидаемые ответы:**
- Найдено: `Найдено [N] задач(а/и): ...`
- Не найдено: `По запросу "..." ничего не найдено.`

| # | Фраза | Слоты | Ожидание | Статус |
|---|---|---|---|---|
| 1 | «найди задачу про отчёт» | query=отчёт | Результаты поиска | [ ] |
| 2 | «поиск задачи молоко» | query=молоко | Результаты поиска | [ ] |
| 3 | «найди задачу про макбук» | query=макбук | Результаты (если задача называется MacBook) | [ ] |
| 4 | «найди задачу купить» | query=купить | Результаты поиска | [ ] |

**Возможные проблемы голосового распознавания:**
- **«макбук» vs «MacBook»**: fuzzy search по `token_sort_ratio` не найдёт латинское "MacBook" по кириллическому "макбук" — нет транслитерации (ИЗВЕСТНАЯ ПРОБЛЕМА)
- «отчёт» / «отчет» — fuzzy search должен справиться
- Предлог «про» может войти в слот query

---

### 2.7. edit_task — Редактирование задачи

**Intent ID:** `edit_task`
**Слоты:** `task_name` (STRING), `new_date` (DATETIME), `new_priority` (STRING), `new_name` (STRING)

**Ожидаемые ответы:**
- Успех: `Задача "..." обновлена.`
- Нет изменений: `Не поняла, что изменить. Скажите, например: ...`

| # | Фраза | Слоты | Ожидание | Статус |
|---|---|---|---|---|
| 1 | «перенеси задачу купить хлеб на завтра» | name=купить хлеб, new_date=завтра | Задача обновлена | [ ] |
| 2 | «поменяй приоритет задачи отчёт на высокий» | name=отчёт, new_priority=высокий | Задача обновлена | [ ] |
| 3 | «перенеси задачу сменить полотенца на завтра» | name=сменить полотенца, new_date=завтра | Задача обновлена | [ ] |
| 4 | «перенеси задачу встреча на понедельник» | name=встреча, new_date=понедельник | Задача обновлена | [ ] |

**Возможные проблемы голосового распознавания:**
- **ИЗВЕСТНЫЙ БАГ**: грамматика с `.+` для `task_name` «поглощает» дату — например, «перенеси задачу сменить полотенца на завтра» может извлечь name=«сменить полотенца на завтра» без выделения даты
- Слово «на» в названии задачи конфликтует с «на [дата]» — парсер не может разделить
- «высокий» может распознаться как «высоко» — priority_parser должен обработать

---

### 2.8. delete_task — Удаление задачи

**Intent ID:** `delete_task`
**Слоты:** `task_name` (STRING)
**Особенность:** двухходовый диалог с подтверждением (да/нет через YANDEX.CONFIRM / YANDEX.REJECT)

**Ожидаемые ответы:**
- Запрос подтверждения: `Удалить задачу "..."? Скажите да или нет.`
- Подтверждение: `Задача "..." удалена.`
- Отмена: `Отменила удаление.`

| # | Фраза | Слоты | Ожидание | Статус |
|---|---|---|---|---|
| 1 | «удали задачу купить хлеб» → «да» | name=купить хлеб | Запрос подтверждения, потом удаление | [ ] |
| 2 | «удали задачу купить хлеб» → «нет» | name=купить хлеб | Запрос подтверждения, потом отмена | [ ] |
| 3 | «убери задачу позвонить маме» | name=позвонить маме | Запрос подтверждения | [ ] |
| 4 | «удали задачу купить хлеб» → «не знаю» → «не знаю» → «не знаю» | name=купить хлеб | После 3 непонятных ответов — отмена удаления | [ ] |

**Возможные проблемы голосового распознавания:**
- «убери» может не входить в грамматику delete_task (проверить)
- На этапе подтверждения «да» может распознаться как начало нового интента
- «конечно» / «ладно» / «давай» могут не сработать как YANDEX.CONFIRM

---

### 2.9. add_subtask — Добавление подзадачи

**Intent ID:** `add_subtask`
**Слоты:** `subtask_name` (STRING), `parent_name` (STRING)

**Ожидаемые ответы:**
- Успех: `Подзадача "..." добавлена к задаче "...".`

| # | Фраза | Слоты | Ожидание | Статус |
|---|---|---|---|---|
| 1 | «добавь подзадачу купить муку к задаче испечь торт» | subtask=купить муку, parent=испечь торт | Подзадача создана | [ ] |
| 2 | «добавь подзадачу написать введение к задаче подготовить отчёт» | subtask=написать введение, parent=подготовить отчёт | Подзадача создана | [ ] |
| 3 | «добавь подзадачу купить средство к задаче сменить полотенца» | subtask=купить средство, parent=сменить полотенца | Подзадача создана | [ ] |

**Возможные проблемы голосового распознавания:**
- **ИЗВЕСТНЫЙ БАГ**: фраза «добавь подзадачу ... к задаче ...» может быть перехвачена интентом `create_task` вместо `add_subtask`. В роутере `add_subtask` зарегистрирован до `create_task`, но NLU-грамматика `create_task` может сработать первой
- Длинные фразы с двумя названиями задач сложно произносить — пользователь может запутаться
- «к задаче» — ключевая связка, без неё parent_name не извлечётся

---

### 2.10. list_subtasks — Просмотр подзадач

**Intent ID:** `list_subtasks`
**Слоты:** `task_name` (STRING)

**Ожидаемые ответы:**
- Есть подзадачи: `Подзадачи "..." ([N]): ...`
- Нет подзадач: `У задачи "..." нет подзадач.`

| # | Фраза | Слоты | Ожидание | Статус |
|---|---|---|---|---|
| 1 | «покажи подзадачи задачи испечь торт» | name=испечь торт | Список подзадач | [ ] |
| 2 | «покажи подзадачи задачи сменить полотенца» | name=сменить полотенца | Список подзадач | [ ] |
| 3 | «какие подзадачи у задачи отчёт» | name=отчёт | Список подзадач | [ ] |

**Возможные проблемы голосового распознавания:**
- «подзадачи» может распознаться как «под задачи» (два слова)
- Может конфликтовать с `list_tasks` (оба начинаются на «покажи»)

---

### 2.11. add_checklist_item — Добавление пункта чеклиста

**Intent ID:** `add_checklist_item`
**Слоты:** `item_name` (STRING), `task_name` (STRING)

**Ожидаемые ответы:**
- Успех: `Добавила "..." в чеклист задачи "...". Всего пунктов: N.`

| # | Фраза | Слоты | Ожидание | Статус |
|---|---|---|---|---|
| 1 | «добавь пункт молоко в чеклист задачи покупки» | item=молоко, task=покупки | Пункт добавлен | [ ] |
| 2 | «добавь пункт купить мыло в чеклист задачи сменить полотенца» | item=купить мыло, task=сменить полотенца | Пункт добавлен | [ ] |
| 3 | «добавь пункт яйца в чеклист задачи список продуктов» | item=яйца, task=список продуктов | Пункт добавлен | [ ] |

**Возможные проблемы голосового распознавания:**
- **ИЗВЕСТНЫЙ БАГ**: фраза «добавь пункт ... в чеклист задачи ...» перехватывается интентом `create_task` (слово «добавь» + название). В роутере `add_checklist_item` зарегистрирован до `create_task`, но NLU может видеть оба
- «чеклист» может распознаться как «чек лист», «чекист», «чек лисд», «чёклист»
- Длинная составная фраза — пользователю сложно произнести целиком

---

### 2.12. show_checklist — Просмотр чеклиста

**Intent ID:** `show_checklist`
**Слоты:** `task_name` (STRING)

**Ожидаемые ответы:**
- Есть пункты: `Чеклист задачи "...": [x]/[ ] ...`
- Пусто: `Чеклист задачи "..." пуст.`

| # | Фраза | Слоты | Ожидание | Статус |
|---|---|---|---|---|
| 1 | «покажи чеклист задачи покупки» | name=покупки | Чеклист с пунктами | [ ] |
| 2 | «покажи чеклист задачи сменить полотенца» | name=сменить полотенца | Чеклист с пунктами | [ ] |
| 3 | «что в чеклисте задачи покупки» | name=покупки | Чеклист с пунктами | [ ] |

**Возможные проблемы голосового распознавания:**
- «чеклист» — см. проблемы распознавания выше
- Может конфликтовать с `list_tasks` (оба на «покажи»)

---

### 2.13. check_item — Отметка пункта чеклиста

**Intent ID:** `check_item`
**Слоты:** `item_name` (STRING), `task_name` (STRING)

**Ожидаемые ответы:**
- Успех: `Пункт "..." отмечен выполненным.`
- Не найден: `Пункт "..." не найден в чеклисте задачи "...".`

| # | Фраза | Слоты | Ожидание | Статус |
|---|---|---|---|---|
| 1 | «отметь пункт молоко в чеклисте задачи покупки» | item=молоко, task=покупки | Пункт отмечен | [ ] |
| 2 | «отметь пункт поменять полотенца в чеклисте задачи сменить полотенца» | item=поменять полотенца, task=сменить полотенца | Пункт отмечен | [ ] |

**Возможные проблемы голосового распознавания:**
- **ИЗВЕСТНЫЙ БАГ**: «отметь пункт ... в чеклисте задачи ...» перехватывается `complete_task` (слово «отметь» + название). В роутере `check_item` зарегистрирован до `complete_task`, но NLU-грамматика `complete_task` может сработать первой
- Очень длинная фраза — три составных части (действие + пункт + задача)
- «в чеклисте» — ключевая связка, без неё невозможно отличить от `complete_task`

---

### 2.14. delete_checklist_item — Удаление пункта чеклиста

**Intent ID:** `delete_checklist_item`
**Слоты:** `item_name` (STRING), `task_name` (STRING)

**Ожидаемые ответы:**
- Успех: `Пункт "..." удалён из чеклиста задачи "...".`

| # | Фраза | Слоты | Ожидание | Статус |
|---|---|---|---|---|
| 1 | «удали пункт молоко из чеклиста задачи покупки» | item=молоко, task=покупки | Пункт удалён | [ ] |
| 2 | «удали пункт купить мыло из чеклиста задачи сменить полотенца» | item=купить мыло, task=сменить полотенца | Пункт удалён | [ ] |

**Возможные проблемы голосового распознавания:**
- **ИЗВЕСТНЫЙ БАГ**: «удали пункт ... из чеклиста задачи ...» перехватывается `delete_task` (слово «удали»). В роутере `delete_checklist_item` зарегистрирован до `delete_task`, но NLU может видеть `delete_task` первой
- «из чеклиста» — ключевая связка, без неё парсер не отличит от `delete_task`
- «чеклиста» (родительный падеж) может распознаваться некорректно

---

### 2.15. помощь (YANDEX.HELP / YANDEX.WHAT_CAN_YOU_DO)

**Intent ID:** `YANDEX.HELP`, `YANDEX.WHAT_CAN_YOU_DO` (встроенные)

**Ожидаемый ответ:** список возможностей навыка.

| # | Фраза | Ожидание | Статус |
|---|---|---|---|
| 1 | «помощь» | Список команд | [ ] |
| 2 | «что ты умеешь» | Список команд | [ ] |
| 3 | «помоги» | Список команд | [ ] |
| 4 | «что можно сказать» | Список команд | [ ] |

**Возможные проблемы голосового распознавания:**
- Встроенные интенты Яндекса — распознавание обычно стабильное
- «помоги» может не триггерить YANDEX.HELP (проверить)

---

### 2.16. до свидания (YANDEX.GOODBYE)

**Intent ID:** `YANDEX.GOODBYE` (встроенный)

**Ожидаемый ответ:** `До встречи! Удачного дня!` (с `end_session=true`)

| # | Фраза | Ожидание | Статус |
|---|---|---|---|
| 1 | «до свидания» | Прощание, сессия закрывается | [ ] |
| 2 | «пока» | Прощание, сессия закрывается | [ ] |
| 3 | «выход» | Прощание, сессия закрывается | [ ] |
| 4 | «закрой навык» | Прощание, сессия закрывается | [ ] |

**Возможные проблемы голосового распознавания:**
- **ИЗВЕСТНЫЙ БАГ**: `YANDEX.GOODBYE` не срабатывает при текстовом вводе «до свидания» в тестовой консоли (NLU не распознаёт встроенный интент в текстовом режиме)
- Проверить на реальной колонке / в приложении Яндекса — там может работать
- «выход» и «закрой навык» могут быть обработаны самой Алисой, а не навыком

---

## 3. Известные проблемы голосового распознавания

### 3.1. Слово «чеклист»

Алиса часто распознаёт «чеклист» некорректно:

| Произнесено | Возможные варианты распознавания |
|---|---|
| чеклист | чек лист, чекист, чек лисд, чёк лист, чек лис |
| чеклиста | чек листа, чек листов, чеклиста |
| в чеклисте | в чек листе, в чекисте, в чек лисде |

**Рекомендация:** в грамматиках NLU добавить все варианты написания. Проверить, что `%lemma` обрабатывает составные слова.

### 3.2. Иностранные слова в названиях задач

| Название задачи | Голосовой запрос | Проблема |
|---|---|---|
| MacBook | макбук | fuzzy search не транслитерирует рус→англ |
| iPhone | айфон | то же самое |
| README | ридми | то же самое |
| pull request | пул реквест | два слова, разная транслитерация |

**Рекомендация:** добавить транслитерацию в fuzzy_search.py перед сравнением.

### 3.3. Числа в названиях задач

| Произнесено | Как может распознать Алиса |
|---|---|
| «задачу номер пять» | «задачу номер 5» или «задачу номер пять» |
| «купить два литра молока» | «купить 2 литра молока» |
| «страница сто двадцать три» | «страница 123» |

**Рекомендация:** fuzzy search должен быть устойчив к формату чисел. Проверить на реальных примерах.

### 3.4. Даты

| Произнесено | Возможная проблема |
|---|---|
| «послезавтра» | может распознаться как «после завтра» — два отдельных слова |
| «через неделю» | YANDEX.DATETIME может не поддержать относительные интервалы |
| «в следующий понедельник» | может быть «в следующий» без привязки к дню |
| «пятого марта» | может извлечь дату без года |
| «в пятницу» | неоднозначность: ближайшая пятница или прошедшая? |

### 3.5. Конфликты интентов (перехват)

Наиболее критичная проблема: более общие интенты перехватывают команды, предназначенные для специфичных интентов.

| Команда | Ожидаемый интент | Перехватывающий интент | Причина |
|---|---|---|---|
| «добавь подзадачу X к задаче Y» | `add_subtask` | `create_task` | слово «добавь» |
| «добавь пункт X в чеклист задачи Y» | `add_checklist_item` | `create_task` | слово «добавь» |
| «отметь пункт X в чеклисте задачи Y» | `check_item` | `complete_task` | слово «отметь» |
| «удали пункт X из чеклиста задачи Y» | `delete_checklist_item` | `delete_task` | слово «удали» |
| «перенеси задачу X на завтра» | `edit_task` (name=X, date=завтра) | `edit_task` (name=X на завтра) | `.+` поглощает дату |

**Статус решения:** в роутере специфичные интенты зарегистрированы ДО общих, но проблема в NLU-грамматиках: если NLU Яндекса не распознаёт специфичный интент, роутер получает только общий.

---

## 4. Сценарии edge cases

### 4.1. Очень длинные названия задач

| # | Фраза | Что проверяем | Статус |
|---|---|---|---|
| 1 | «создай задачу подготовить подробный план действий на следующий квартал по модернизации инфраструктуры» | Обрезается ли название? Входит ли в лимит? | [ ] |
| 2 | «отметь задачу подготовить подробный план действий на следующий квартал» | Сработает ли fuzzy match на длинном названии? | [ ] |

### 4.2. Названия задач с числами

| # | Фраза | Что проверяем | Статус |
|---|---|---|---|
| 1 | «создай задачу купить 3 литра молока» | Число как часть названия | [ ] |
| 2 | «найди задачу про 10 страницу» | Число в поисковом запросе | [ ] |

### 4.3. Названия задач с английскими словами

| # | Фраза | Что проверяем | Статус |
|---|---|---|---|
| 1 | «создай задачу ревью пул реквеста» | Смешанный рус/англ | [ ] |
| 2 | «найди задачу про макбук» | Транслитерация при поиске (задача может называться MacBook) | [ ] |
| 3 | «отметь задачу деплой на прод» | Жаргон/транслит | [ ] |

### 4.4. Несколько задач с похожими названиями

| # | Фраза | Что проверяем | Статус |
|---|---|---|---|
| 1 | «отметь задачу купить» (при наличии «купить молоко» и «купить хлеб») | Какая задача выберется? Best match | [ ] |
| 2 | «удали задачу отчёт» (при наличии «отчёт за январь» и «отчёт за февраль») | Какая задача выберется? | [ ] |

### 4.5. Пустой список задач

| # | Фраза | Что проверяем | Статус |
|---|---|---|---|
| 1 | «что на сегодня» (при пустом списке) | Ответ «На сегодня задач нет. Можно отдыхать!» | [ ] |
| 2 | «какие задачи просрочены» (нет просроченных) | Ответ «Просроченных задач нет. Отличная работа!» | [ ] |
| 3 | «найди задачу молоко» (задач нет вообще) | Ответ «По запросу "молоко" ничего не найдено.» | [ ] |

### 4.6. Отсутствие авторизации (токен не привязан или истёк)

| # | Фраза | Что проверяем | Статус |
|---|---|---|---|
| 1 | «что на сегодня» (без привязки аккаунта) | Запрос привязки TickTick-аккаунта | [ ] |
| 2 | «создай задачу тест» (токен истёк) | Корректная обработка ошибки | [ ] |

### 4.7. Ошибки API TickTick

| # | Фраза | Что проверяем | Статус |
|---|---|---|---|
| 1 | любая команда при недоступном API | Ответ «Произошла ошибка при обращении к TickTick. Попробуйте позже.» | [ ] |

### 4.8. Неизвестные команды

| # | Фраза | Ожидание | Статус |
|---|---|---|---|
| 1 | «расскажи анекдот» | Fallback: «Не поняла команду. Скажите "помощь"...» | [ ] |
| 2 | «какая погода» | Fallback | [ ] |
| 3 | «алиса» | Fallback | [ ] |

---

## 5. Результаты тестирования в текстовой консоли (эталон)

Результаты предварительного тестирования через текстовый ввод в консоли Яндекс.Диалогов:

| # | Команда | Интент | Результат | Примечания |
|---|---|---|---|---|
| 1 | создай задачу купить хлеб | create_task | OK | |
| 2 | отметь задачу купить хлеб | complete_task | OK | |
| 3 | что на сегодня | list_tasks | OK | |
| 4 | покажи чеклист задачи сменить полотенца | show_checklist | OK | |
| 5 | найди задачу про макбук | search_task | ПРОБЛЕМА | "MacBook" не найден по запросу "макбук" — нет транслитерации |
| 6 | какие задачи просрочены | overdue_tasks | OK | |
| 7 | удали задачу купить хлеб | delete_task | OK | Подтверждение работает |
| 8 | перенеси задачу сменить полотенца на завтра | edit_task | БАГ | `.+` в грамматике поглощает "на завтра" — дата не извлекается |
| 9 | покажи подзадачи задачи сменить полотенца | list_subtasks | OK | |
| 10 | добавь подзадачу купить средство к задаче сменить полотенца | add_subtask? | БАГ | create_task перехватывает |
| 11 | отметь пункт поменять полотенца в чеклисте задачи сменить полотенца | check_item? | БАГ | complete_task перехватывает |
| 12 | добавь пункт купить мыло в чеклист задачи сменить полотенца | add_checklist_item? | БАГ | create_task перехватывает |
| 13 | удали пункт купить мыло из чеклиста задачи сменить полотенца | delete_checklist_item? | БАГ | delete_task перехватывает |
| 14 | помощь | YANDEX.HELP | OK | |
| 15 | до свидания | YANDEX.GOODBYE | БАГ | Встроенный интент не срабатывает в текстовом режиме |

---

## 6. Чек-лист для полного прохода

Компактный чек-лист для быстрого прохода по всем сценариям. Отмечать `[x]` при успешном тестировании.

### Базовые сценарии

- [ ] Запуск навыка — приветствие
- [ ] «создай задачу купить хлеб» — задача создана
- [ ] «создай задачу позвонить маме на завтра» — задача с датой
- [ ] «что на сегодня» — список задач
- [ ] «покажи задачи на завтра» — список на дату
- [ ] «какие задачи просрочены» — просроченные
- [ ] «отметь задачу купить хлеб» — задача завершена
- [ ] «найди задачу про отчёт» — поиск
- [ ] «перенеси задачу встреча на завтра» — редактирование даты
- [ ] «поменяй приоритет задачи отчёт на высокий» — редактирование приоритета
- [ ] «удали задачу тест» → «да» — удаление с подтверждением
- [ ] «удали задачу тест» → «нет» — отмена удаления

### Подзадачи

- [ ] «добавь подзадачу X к задаче Y» — подзадача создана
- [ ] «покажи подзадачи задачи Y» — список подзадач

### Чеклисты

- [ ] «добавь пункт X в чеклист задачи Y» — пункт добавлен
- [ ] «покажи чеклист задачи Y» — чеклист отображён
- [ ] «отметь пункт X в чеклисте задачи Y» — пункт отмечен
- [ ] «удали пункт X из чеклиста задачи Y» — пункт удалён

### Служебные

- [ ] «помощь» — список команд
- [ ] «что ты умеешь» — список команд
- [ ] «до свидания» — прощание, сессия закрыта
- [ ] «пока» — прощание, сессия закрыта
- [ ] Неизвестная команда — fallback

### Edge cases

- [ ] Длинное название задачи
- [ ] Задача с числами в названии
- [ ] Задача с английскими словами
- [ ] Пустой список задач
- [ ] Без авторизации — запрос привязки аккаунта
- [ ] Похожие названия задач — правильный выбор

### Известные баги (регрессия)

- [ ] `edit_task` с датой — дата не поглощается грамматикой
- [ ] `add_subtask` — не перехватывается `create_task`
- [ ] `add_checklist_item` — не перехватывается `create_task`
- [ ] `check_item` — не перехватывается `complete_task`
- [ ] `delete_checklist_item` — не перехватывается `delete_task`
- [ ] `YANDEX.GOODBYE` — срабатывает (хотя бы голосом)
